<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NNITRO GOLD V63</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <style>
        :root { --main: #ff8c00; --dark: #121212; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--main); color: #fff; height: 100vh; overflow: hidden; }
        
        /* AUTH */
        #auth { position: fixed; inset: 0; background: var(--main); z-index: 10000; display: flex; align-items: center; justify-content: center; }
        .card { width: 90%; max-width: 380px; background: rgba(0,0,0,0.2); padding: 30px; border-radius: 30px; backdrop-filter: blur(20px); text-align: center; }
        input, select { width: 100%; padding: 15px; margin: 10px 0; border: none; border-radius: 12px; outline: none; font-weight: bold; }
        .btns { display: flex; gap: 10px; }
        .btn { flex: 1; padding: 15px; border: none; border-radius: 12px; font-weight: 900; cursor: pointer; transition: 0.2s; }
        .btn-b { background: #000; color: #fff; }
        .btn-w { background: #fff; color: #000; }

        /* MAIN */
        #app { display: none; flex-direction: column; height: 100vh; }
        .nav { padding: 15px 20px; background: rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; }
        .list { flex: 1; overflow-y: auto; padding: 15px; }
        .item { background: rgba(255,255,255,0.15); padding: 15px; border-radius: 18px; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; cursor: pointer; position: relative; }
        .st { width: 12px; height: 12px; border-radius: 50%; background: #44ff44; position: absolute; left: 45px; bottom: 15px; border: 2px solid var(--main); display: none; }
        .ava { width: 50px; height: 50px; border-radius: 50%; background: #fff; color: #000; display: flex; align-items: center; justify-content: center; font-size: 22px; }

        /* CHAT */
        #win { position: fixed; inset: 0; background: var(--main); display: none; flex-direction: column; z-index: 9000; }
        .msgs { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .bbl { padding: 12px; border-radius: 18px; max-width: 80%; background: rgba(255,255,255,0.2); position: relative; font-size: 15px; }
        .bbl.me { background: #000; align-self: flex-end; }
        .bbl b { font-size: 11px; opacity: 0.7; display: block; }
        .bar { padding: 15px; display: flex; gap: 10px; background: rgba(0,0,0,0.15); align-items: center; }

        /* ADMIN */
        #adm { display: none; background: #000; padding: 10px; flex-wrap: wrap; gap: 5px; justify-content: center; border-bottom: 2px solid red; }
        #adm button { background: red; color: #fff; border: none; padding: 6px 10px; border-radius: 5px; font-size: 10px; font-weight: bold; }
        .ver::after { content: ' ‚úî'; color: #007bff; }
    </style>
</head>
<body>

    <div id="auth">
        <div class="card">
            <h1>NNITRO GOLD</h1>
            <input id="un" placeholder="–ù–ò–ö–ù–ï–ô–ú">
            <input type="password" id="up" placeholder="–ü–ê–†–û–õ–¨">
            <select id="ue"><option value="üî•">V-VIP</option><option value="üëë">CREATOR</option><option value="ü•∑">NINJA</option></select>
            <input id="uk" placeholder="–ö–û–î (NNITRO-2026)">
            <div class="btns">
                <button class="btn btn-w" onclick="start('reg')">–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</button>
                <button class="btn btn-b" onclick="start('log')">–í–•–û–î</button>
            </div>
        </div>
    </div>

    <div id="app">
        <div id="adm">
            <button onclick="admAct('pass')">PASS RESET</button>
            <button onclick="admAct('ban')">BAN</button>
            <button onclick="admAct('unban')">UNBAN</button>
            <button onclick="admAct('mute')">MUTE</button>
            <button onclick="admAct('ver')">VERIFY</button>
            <button onclick="admAct('bl')">BLACK LIST</button>
        </div>
        <div class="nav">
            <div onclick="showAdm()"><h2 id="my-n"></h2><small id="on-info">–í —Å–µ—Ç–∏: 0</small></div>
            <div id="my-a" class="ava"></div>
        </div>
        <div class="list" id="main-list"></div>
    </div>

    <div id="win">
        <div class="nav">
            <span onclick="document.getElementById('win').style.display='none'" style="font-size:30px; cursor:pointer">‚Üê</span>
            <b id="win-t"></b>
        </div>
        <div class="msgs" id="m-box"></div>
        <div class="bar">
            <button onclick="sendVox()" style="background:none; border:none; font-size:24px;">üé§</button>
            <input id="m-in" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." style="flex:1; margin:0;">
            <button onclick="send()" style="background:#000; border:none; color:#fff; padding:10px 18px; border-radius:10px; font-weight:bold;">OK</button>
        </div>
    </div>

    <script>
        const config = { databaseURL: "https://nnitro-system-default-rtdb.firebaseio.com" };
        firebase.initializeApp(config);
        const db = firebase.database();
        let my = {}, cur = "";

        async function start(mode) {
            const n = document.getElementById('un').value.trim();
            const p = document.getElementById('up').value;
            const e = document.getElementById('ue').value;
            if(document.getElementById('uk').value !== 'NNITRO-2026') return alert("–ö–û–î!");

            const ref = db.ref('users/'+n);
            const s = await ref.once('value');

            if(mode === 'log' && (!s.exists() || s.val().p !== p)) return alert("–û–®–ò–ë–ö–ê –í–•–û–î–ê");
            if(s.exists() && s.val().banned) return alert("–í–´ –ó–ê–ë–ê–ù–ï–ù–´!");

            my = { n, p, e, v: (n === 'VAaD'), online: true, regDate: s.exists() ? s.val().regDate : new Date().toLocaleDateString() };
            await ref.update(my);

            document.getElementById('auth').style.display = 'none';
            document.getElementById('app').style.display = 'flex';
            document.getElementById('my-n').innerText = n;
            if(my.v) document.getElementById('my-n').classList.add('ver');
            document.getElementById('my-a').innerText = e;
            sync();
        }

        function sync() {
            db.ref('users').on('value', s => {
                const list = document.getElementById('main-list');
                let on = 0;
                list.innerHTML = `
                    <div class="item" onclick="openCh('ZIP AI')"><div class="ava">ü§ñ</div><b>ZIP AI NEURO</b></div>
                    <div class="item" onclick="openCh('GLOBAL')"><div class="ava">üåê</div><b>–û–ë–©–ò–ô –ß–ê–¢ (GLOBAL)</b></div>
                `;
                s.forEach(u => {
                    const d = u.val();
                    if(d.online) on++;
                    if(d.n === my.n || d.banned) return;
                    list.innerHTML += `
                        <div class="item" onclick="openCh('${d.n}')">
                            <div class="ava">${d.e}</div>
                            ${d.online ? '<div class="st" style="display:block"></div>' : ''}
                            <b class="${d.v ? 'ver' : ''}">${d.n}</b>
                            <small style="margin-left:auto; opacity:0.5; font-size:9px;">${d.regDate}</small>
                        </div>`;
                });
                document.getElementById('on-info').innerText = "–í –°–ï–¢–ò: " + on;
            });
        }

        function openCh(t) {
            cur = t; document.getElementById('win-t').innerText = t;
            document.getElementById('win').style.display = 'flex';
            const path = (t === 'GLOBAL' || t === 'ZIP AI') ? 'rooms/'+t : 'pvt/'+[my.n, t].sort().join('_');
            db.ref(path).off();
            db.ref(path).on('value', s => {
                const b = document.getElementById('m-box'); b.innerHTML = '';
                s.forEach(m => {
                    const d = m.val();
                    b.innerHTML += `<div class="bbl ${d.u === my.n ? 'me' : ''}"><b>${d.u}</b>${d.t}</div>`;
                });
                b.scrollTop = b.scrollHeight;
            });
        }

        async function send() {
            const t = document.getElementById('m-in').value.trim();
            const me = await db.ref('users/'+my.n).once('value');
            if(!t || me.val().muted) return alert("MUTE!");
            
            const path = (cur === 'GLOBAL' || cur === 'ZIP AI') ? 'rooms/'+cur : 'pvt/'+[my.n, cur].sort().join('_');
            db.ref(path).push({ u: my.n, t });
            document.getElementById('m-in').value = '';

            if(cur === 'ZIP AI') {
                setTimeout(() => db.ref(path).push({u:'ZIP AI', t:'[ZIP] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª. NNITRO —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –±–æ—é.'}), 1000);
            }
        }

        function sendVox() { 
            const path = (cur === 'GLOBAL' || cur === 'ZIP AI') ? 'rooms/'+cur : 'pvt/'+[my.n, cur].sort().join('_');
            db.ref(path).push({ u: my.n, t: 'üé§ –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (0:05)' });
        }

        function showAdm() { if(my.n === 'VAaD') { const a = document.getElementById('adm'); a.style.display = a.style.display==='flex'?'none':'flex'; } }

        async function admAct(type) {
            if(type === 'bl') {
                const s = await db.ref('users').once('value');
                let bl = "–ß–ï–†–ù–´–ô –°–ü–ò–°–û–ö:\n";
                s.forEach(u => { if(u.val().banned) bl += u.key + "\n"; });
                alert(bl); return;
            }
            const u = prompt("–ù–ò–ö:"); if(!u) return;
            if(type === 'pass') { const p = prompt("–ù–û–í–´–ô –ü–ê–†–û–õ–¨:"); db.ref('users/'+u).update({p}); }
            if(type === 'ban') db.ref('users/'+u).update({banned: true, online: false});
            if(type === 'unban') db.ref('users/'+u).update({banned: false});
            if(type === 'mute') db.ref('users/'+u).update({muted: true});
            if(type === 'ver') db.ref('users/'+u).update({v: true});
            alert("–ì–û–¢–û–í–û!");
        }

        window.onbeforeunload = () => { if(my.n) db.ref('users/'+my.n).update({online: false}); };
    </script>
</body>
</html>
